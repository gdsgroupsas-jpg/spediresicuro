{
  "extends": "next/core-web-vitals",
  "overrides": [
    {
      "files": [
        "app/api/shipments/**/*.ts",
        "app/api/shipments/**/*.tsx",
        "actions/wallet.ts"
      ],
      "rules": {
        "no-restricted-imports": [
          "error",
          {
            "paths": [
              {
                "name": "@/lib/auth-config",
                "message": "❌ SECURITY P0: Direct auth() import is FORBIDDEN in migrated files. Use requireSafeAuth() from @/lib/safe-auth to support impersonation (Acting Context)."
              },
              {
                "name": "next-auth",
                "message": "❌ SECURITY P0: Direct next-auth import is FORBIDDEN in migrated files. Use requireSafeAuth() from @/lib/safe-auth to support impersonation (Acting Context)."
              },
              {
                "name": "next-auth/react",
                "message": "❌ SECURITY P0: next-auth/react is client-side only. Use requireSafeAuth() from @/lib/safe-auth for server-side authentication."
              }
            ]
          }
        ]
      }
    },
    {
      "files": [
        "app/api/**/*.ts",
        "app/api/**/*.tsx",
        "actions/**/*.ts",
        "actions/**/*.tsx"
      ],
      "excludedFiles": [
        "app/api/shipments/**/*.ts",
        "app/api/shipments/**/*.tsx",
        "actions/wallet.ts"
      ],
      "rules": {
        "no-restricted-imports": [
          "warn",
          {
            "paths": [
              {
                "name": "@/lib/auth-config",
                "message": "⚠️ LEGACY: auth() usage allowed temporarily. Migration to requireSafeAuth() required for Acting Context support. See docs/SECURITY_GATE_ACTING_CONTEXT.md"
              },
              {
                "name": "next-auth",
                "message": "⚠️ LEGACY: next-auth usage allowed temporarily. Migration to requireSafeAuth() required for Acting Context support."
              },
              {
                "name": "next-auth/react",
                "message": "⚠️ LEGACY: next-auth/react is client-side only. Migration to requireSafeAuth() required for server-side."
              }
            ]
          }
        ]
      }
    }
  ]
}

